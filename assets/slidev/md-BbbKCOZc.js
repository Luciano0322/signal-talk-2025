const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/CodeRunner-BSyrRzJB.js","assets/modules/vue-BlJ70r5h.js","assets/monaco/bundled-types-Cq9ozMVy.js","assets/modules/file-saver-C8QSpN-3.js","assets/monaco/bundled-types-DKWm8_Iq.css","assets/index-C4TkBH-W.js","assets/modules/shiki-CP8fmmdQ.js","assets/modules/shiki-CozCpemh.css","assets/index-B1I9WZ8N.css","assets/slidev/context-DDuMCkpx.js","assets/slidev/IconButton.vue_vue_type_script_setup_true_lang-BzSfFMpX.js","assets/CodeRunner-DcJPFc8h.css"])))=>i.map(i=>d[i]);
import{_,e as U}from"../monaco/bundled-types-Cq9ozMVy.js";import{d as Y,r as l,z as V,a0 as F,N as G,p as E,f as J,o as z,g as r,b as k,i as q,k as X,H as f,a1 as Z,w as ee,e as D,K as m,m as N,v as te,x as oe}from"../modules/vue-BlJ70r5h.js";import{l as S}from"../lz-string-si4yBCUE.js";import{j as ne,m as H}from"../index-C4TkBH-W.js";import{u as I,f as ae}from"./context-DDuMCkpx.js";import{I as ie}from"./default-C1XErA27.js";import"../modules/file-saver-C8QSpN-3.js";import"../modules/shiki-CP8fmmdQ.js";const re={class:"relative slidev-monaco-container"},se=Y({__name:"Monaco",props:{codeLz:{default:""},diffLz:{},lang:{default:"typescript"},readonly:{type:Boolean,default:!1},lineNumbers:{default:"off"},height:{default:"initial"},editorOptions:{},ata:{type:Boolean,default:!0},runnable:{type:Boolean,default:!1},writable:{},autorun:{type:[Boolean,String],default:!0},showOutputAt:{type:[null,Boolean,String,Number,Array]},outputHeight:{},highlightOutput:{type:Boolean,default:!0},runnerOptions:{}},setup(B){const e=B,h=Z(()=>_(()=>import("./CodeRunner-BSyrRzJB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(s=>s.default)),d=l(S.decompressFromBase64(e.codeLz).trimEnd()),n=e.diffLz&&l(S.decompressFromBase64(e.diffLz).trimEnd()),g=V(()=>e.writable&&!e.readonly&&!1),v={ts:"typescript",js:"javascript"}[e.lang]??e.lang,L={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[e.lang]??e.lang,W=l(),A=l(),y=l(0),C=l(),K=V(()=>e.height==="auto"?`${y.value}px`:e.height==="initial"?`${C.value}px`:e.height),w=l(),{$page:Q,$renderContext:R}=I(),{currentSlideNo:T}=ne(),j=F(()=>Math.abs(Q.value-T.value)<=1&&w.value,s=>{["slide","presenter"].includes(R.value)?s():setTimeout(s,5e3)});return G(async()=>{const{default:s}=await _(async()=>{const{default:t}=await import("../monaco/bundled-types-Cq9ozMVy.js").then(i=>i.x);return{default:t}},__vite__mapDeps([2,3,1,4])),{ata:u,monaco:o,editorOptions:P}=await s(),c=o.editor.createModel(d.value,v,o.Uri.parse(`file:///${H()}.${L}`));c.onDidChangeContent(()=>d.value=c.getValue());const O={automaticLayout:!0,readOnly:e.readonly,lineNumbers:e.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontSize:11.5,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,useInlineViewWhenSpaceIsLimited:!1,...P,...e.editorOptions};let a;if(n){const t=o.editor.createModel(n.value,v,o.Uri.parse(`file:///${H()}.${L}`));t.onDidChangeContent(()=>d.value=c.getValue());const i=o.editor.createDiffEditor(A.value,{renderOverviewRuler:!1,...O});i.setModel({original:c,modified:t});const p=i.getOriginalEditor(),b=i.getModifiedEditor(),M=()=>{const x=Math.max(p.getContentHeight(),b.getContentHeight())+4;C.value??=x,y.value=x,E(()=>i.layout())};p.onDidContentSizeChange(M),b.onDidContentSizeChange(M),a=b}else{const t=o.editor.create(A.value,{model:c,lineDecorationsWidth:0,...O});t.onDidContentSizeChange(i=>{const p=i.contentHeight+4;C.value??=p,y.value=p,E(()=>a.layout())}),a=t}w.value=()=>{j(),_(()=>import("../monaco/bundled-types-Cq9ozMVy.js").then(t=>t.y),__vite__mapDeps([2,3,1,4])),e.ata&&(u(a.getValue()),a.onDidChangeModelContent(U(1e3,()=>{u(a.getValue())})))};const $=a.layoutContentWidget.bind(a);a.layoutContentWidget=t=>{$(t),t.getId()==="editor.contrib.resizableContentHoverWidget"&&(t._resizableNode.domNode.style.transform=t._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},a.addAction({id:"slidev-save",label:"Save",keybindings:[o.KeyMod.CtrlCmd|o.KeyCode.KeyS],run:()=>{g.value,console.warn("[Slidev] this monaco editor is not writable, save action is ignored.")}}),E(()=>o.editor.remeasureFonts()),setTimeout(()=>o.editor.remeasureFonts(),1e3)}),(s,u)=>(z(),J("div",re,[r("div",{ref_key:"outer",ref:W,class:"relative slidev-monaco-container-inner",style:X({height:K.value})},[r("div",{ref_key:"container",ref:A,class:"absolute inset-0.5"},null,512)],4),e.runnable?(z(),k(f(h),{key:0,modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=o=>d.value=o),lang:f(v),autorun:e.autorun,"show-output-at":e.showOutputAt,height:e.outputHeight,"highlight-output":e.highlightOutput,"runner-options":e.runnerOptions},null,8,["modelValue","lang","autorun","show-output-at","height","highlight-output","runner-options"])):q("v-if",!0)]))}}),Ae={__name:"slides.md__slidev_23",setup(B){const{$clicksContext:e,$frontmatter:h}=I();return e.setup(),(d,n)=>{const g=se;return z(),k(ie,te(oe(f(ae)(f(h),22))),{default:ee(()=>[n[0]||(n[0]=r("h1",null,"Monaco Editor",-1)),n[1]||(n[1]=r("p",null,"Slidev provides built-in Monaco Editor support.",-1)),n[2]||(n[2]=r("p",null,[m("Add "),r("code",null,"{monaco}"),m(" to the code block to turn it into an editor:")],-1)),D(g,N({"code-lz":"JYWwDg9gTgLgBAbzlApgMzgXzmqERwBEAbgK4qEDcAUKJLInCuDAJ4CCUUAhq1jngKEAdAHoUADxgooAO24AbKtWoBjCLIDO8blzgBeZOgAUzMG049WxgIwAGAJQOaQA",lang:"ts"},{}),null,16),n[3]||(n[3]=r("p",null,[m("Use "),r("code",null,"{monaco-run}"),m(" to create an editor that can execute the code directly in the slide:")],-1)),D(g,N({runnable:"","code-lz":"JYWwDg9gTgLgBAbzgNwKZQM7AgOzgXzgDMoIQ4AiZAV1QoG4AoUSWROVcGATwEEooAQ24AaOBmEAJVABsZEAsVLkKAOgD0qAB4x0OQTIaNGE7tLkQAFAEomAY1wYIM1KvkBzSwAMaqOABIENExsHHwvW0YHHCcXNwhPRjgOLj4BYQAeHGoQACN0AD5LAEYABmtVKFQAE2o7VEsk5LhLImBc6zgAXgK4AG1VQbbcsWHVQRhLAFpi6wBCOABqYnbxyamAJnmAXREm5L7isWLtputGSKA==",lang:"ts"},{}),null,16)]),_:1},16)}}};export{Ae as default};
